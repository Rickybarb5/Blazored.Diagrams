@using System.Text
@using Blazor.Flows.Services.Diagrams
<div class="@GetClass()">
    @if (Content is not null)
    {
        @Content
    }
</div>

@code {
    [CascadingParameter] public required IDiagramService DiagramService { get; init; }
    [Parameter] public required Port Port { get; init; }

    private StringBuilder _builder = new ();
    /// <summary>
    /// Optional content if people want to use the default component.
    /// </summary>
    [Parameter]
    public RenderFragment? Content { get; set; }

    private const string DefaultCssClass = "default-port";
    
    private string GetClass()
    {
        _builder.Clear();
        _builder.Append(DefaultCssClass);
        if (Port.IsSelected)
        {
            _builder.Append(" selected");
        }

        if (Port.HasLinks)
        {
            _builder.Append(" linked");
        }

        return _builder.ToString();
    }
}