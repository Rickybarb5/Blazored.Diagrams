@page "/diagram-behaviours"
@using Blazored.Diagrams.Options.Behaviours

<MudContainer MaxWidth="MaxWidth.False" Style="height:100%; padding-top: 20px;">
    <MudGrid Style="height:100%">

        <MudItem xs="12" sm="12" md="4" Style="height:100%;">
            <MudPaper Class="pa-4 mud-height-full overflow-y-auto" Elevation="2">
                <MudText Typo="Typo.h4" Color="Color.Primary" Class="mb-6">
                    Diagram Behaviours
                </MudText>

                <MudStack Spacing="3" Class="mb-6">
                    <MudText Typo="Typo.h6">Zoom Behaviour</MudText>
                    <MudText Typo="Typo.body2" Class="mud-text-secondary">
                        Scroll to zoom in and out of the diagram.
                    </MudText>

                    <div class="d-flex justify-content-between align-center">
                        <MudSwitch @bind-Value="Service.Behaviours.GetBehaviourOptions<ZoomBehaviourOptions>()!.IsEnabled"
                                   Color="Color.Primary"
                                   Label="Zooming enabled"
                                   LabelPlacement="Placement.Start"/>
                    </div>

                    <MudNumericField T="double" Immediate="true" Label="Max zoom value" @bind-Value="Service.Behaviours.GetBehaviourOptions<ZoomBehaviourOptions>()!.MaxZoom"/>
                    <MudNumericField T="double" Immediate="true" HelperText="Must be bigger than 0" Label="Min zoom value" @bind-Value="Service.Behaviours.GetBehaviourOptions<ZoomBehaviourOptions>()!.MinZoom"/>
                    <MudNumericField T="double" Immediate="true" Label="Zoom step" @bind-Value="Service.Behaviours.GetBehaviourOptions<ZoomBehaviourOptions>()!.ZoomStep"/>
                </MudStack>
                <MudDivider Class="my-4"/>

                <MudStack Spacing="3" Class="mb-6">
                    <div class="d-flex justify-content-between align-center">
                        <MudText Typo="Typo.h6">Panning Behaviour</MudText>
                      
                    </div>
                    <MudText Typo="Typo.body2" Class="mud-text-secondary">
                        Drag the canvas to pan the view.
                    </MudText>
                    <MudSwitch @bind-Value="Service.Behaviours.GetBehaviourOptions<PanBehaviourOptions>()!.IsEnabled"
                               Color="Color.Primary"
                               Label="Panning enabled"
                               LabelPlacement="Placement.Start"/>
                </MudStack>
                <MudDivider Class="my-4"/>

                <MudStack Spacing="3" Class="mb-6">
                    <div class="d-flex justify-content-between align-center">
                        <MudText Typo="Typo.h6">Moving Models</MudText>
                       
                    </div>
                    <MudText Typo="Typo.body2" Class="mud-text-secondary">
                        Click and drag a model to move it within the diagram.
                    </MudText>
                    <MudSwitch @bind-Value="Service.Behaviours.GetBehaviourOptions<MoveBehaviourOptions>().IsEnabled"
                               Color="Color.Primary"
                               Label="Moving enabled"
                               LabelPlacement="Placement.Start"/>
                </MudStack>
                <MudDivider Class="my-4"/>

                <MudStack Spacing="3" Class="mb-6">
                    <MudText Typo="Typo.h6">Selection Behaviour</MudText>
                    <MudText Typo="Typo.body2" Class="mud-text-secondary">
                        Click on a model to select it. Use <b>Ctrl+Click</b> to select multiple models.
                    </MudText>

                    <MudSwitch @bind-Value="Service.Behaviours.GetBehaviourOptions<SelectBehaviourOptions>().SelectionEnabled"
                               Color="Color.Primary"
                               Label="Selection enabled"
                               LabelPlacement="Placement.Start"/>

                    <MudSwitch @bind-Value="Service.Behaviours.GetBehaviourOptions<SelectBehaviourOptions>().MultiSelectEnabled"
                               Color="Color.Primary"
                               Label="Multiselect enabled (Ctrl+Click)"
                               LabelPlacement="Placement.Start"/>
                </MudStack>
                <MudDivider Class="my-4"/>

                <MudStack Spacing="3" Class="mb-6">
                    <MudText Typo="Typo.h6">Drawing Links</MudText>
                    <MudText Typo="Typo.body2" Class="mud-text-secondary">
                        Drag from one port to another to create a link.
                    </MudText>

                    <MudSwitch @bind-Value="Service.Behaviours.GetBehaviourOptions<DrawLinkBehaviourOptions>().IsEnabled"
                               Color="Color.Primary"
                               Label="Link creation enabled"
                               LabelPlacement="Placement.Start"/>

                    <MudSelect T="Type" Label="Default Link Type"
                               @bind-Value="@(Service.Behaviours.GetBehaviourOptions<DrawLinkBehaviourOptions>().LinkType)">
                        <MudSelectItem T="Type" Value="@(typeof(LineLink))">Line (Straight)</MudSelectItem>
                        <MudSelectItem T="Type" Value="@(typeof(CurvedLink))">Curved (Bezier)</MudSelectItem>
                        <MudSelectItem T="Type" Value="@(typeof(OrthogonalLink))">Orthogonal (Right-angle)</MudSelectItem>
                    </MudSelect>
                </MudStack>
                <MudDivider Class="my-4"/>

                <MudStack Spacing="3" Class="mb-4">
                    <MudText Typo="Typo.h6">Delete Models</MudText>
                    <MudText Typo="Typo.body2" Class="mud-text-secondary">
                        Select a model and press the designated key to delete it.
                    </MudText>
                    <MudSwitch @bind-Value="Service.Behaviours.GetBehaviourOptions<DeleteWithKeyBehaviourOptions>().IsEnabled"
                               Color="Color.Primary"
                               Label="Delete enabled"
                               LabelPlacement="Placement.Start"/>
                    <MudTextField Style="max-width: 150px" Immediate="true" Label="Delete key code" @bind-Value="Service.Behaviours.GetBehaviourOptions<DeleteWithKeyBehaviourOptions>().DeleteKeyCode"/>
                </MudStack>

            </MudPaper>
        </MudItem>

        <MudItem xs="12" sm="12" md="8" Style="height:100%">
            <MudPaper Class="mud-height-full" Elevation="2">
                <DiagramShowcase Service="Service"></DiagramShowcase>
            </MudPaper>
        </MudItem>

    </MudGrid>
</MudContainer>

@code {
    [Inject] public IDiagramService Service { get; set; } = null!;
}